<mat-sidenav-container>
    <mat-sidenav mode="side" opened>
        <div class="center">
            <h1 class="header">Chess Maker</h1>
            <button mat-raised-button color="primary" (click)="createGame()">New Game</button>
        </div>
        <br><br>
        <ng-template ngFor let-game [ngForOf]="games | keyvalue">
            <button mat-mini-fab
                    color="accent"
                    class="delete-game-button"
                    *ngIf="game.value.creator == api.nickname"
                    (click)="api.run('delete_game', {game_id: game.key})">
                <mat-icon>close</mat-icon>
            </button>
            <mat-card (click)="showGame(game.key)"
                      [ngStyle]="{backgroundColor: game.key == selectedGameId ? '#c2185b' : '#303030'}">
                <mat-card-content>
                    <h1>{{hasNotification[game.key] ? '*' : ''}}{{game.value.name}}</h1>
                    Created by {{game.value.creator}}<br>
                    A <strong>{{game.value.board}}</strong> game with <strong>{{game.value.total_players - game.value.available_colors.length}}/{{game.value.total_players}}</strong> players.
                </mat-card-content>
            </mat-card>
        </ng-template>
    </mat-sidenav>
    <mat-sidenav-content>
        <app-board [gameId]="selectedGameId"
                   [game]="selectedGameId ? games[selectedGameId] : null"
                   [notify]="notify.bind(this)"></app-board>
        <mat-card id="join-game-box" *ngIf="selectedGameId && games[selectedGameId].playing_as == null">
            <mat-card-content>
                <h1>{{games[selectedGameId].available_colors.length ? 'Join As' : 'Spectating'}}</h1>
                <mat-chip-list>
                    <mat-chip *ngFor="let color of games[selectedGameId].available_colors"
                              [ngStyle]="{backgroundColor: colorNames[color], color: color == 0 || color == 3 || color == 4 ? 'black' : 'white'}"
                              (click)="joinGame(selectedGameId, color)">
                        {{colorNames[color]}}
                    </mat-chip>
                </mat-chip-list>
            </mat-card-content>
        </mat-card>
    </mat-sidenav-content>
</mat-sidenav-container>



